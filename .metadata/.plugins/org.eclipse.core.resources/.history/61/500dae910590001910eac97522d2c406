package genetic.crossover;

import java.util.ArrayList;
import java.util.HashSet;

import genetic.Chromosome;
import util.SaveCopy;

public class CrossoverPBX extends CrossoverRandomIndices {

	public CrossoverPBX(Chromosome firstParent, Chromosome secondParent, ArrayList<Integer> indices) {
		super(firstParent, secondParent, indices);
	}

	@Override
	protected Chromosome doCrossover(int[] parent1, int[] parent2) {
	
		HashSet<Integer> selectedIndices = new HashSet<Integer>();	
		HashSet<Integer> selectedValues = new HashSet<Integer>();
		
		
		//copy the cities, which were found at the selected positions in the 
		//first parent, to the offspring at the same positions
		
		for(Integer index: indices) {
			arrKid[index] = parent1[index];
			
			//remember the cities, which were found at the selected positions in the 
			//first parent	
			selectedValues.add(parent1[index]);
		}
		
		//the other positions are filled with the remaining cities in 
		//the same order as in the second parent
		int nextIndexPar2 = 0;
		for (int i = 0; i < arrLength; i++) {
			if (selectedValues.contains(parent2[nextIndexPar2])) {
				nextIndexPar2++;
			}
			arrKid[i] = parent2[nextIndexPar2];
		}
		
		return null;
	}

}
